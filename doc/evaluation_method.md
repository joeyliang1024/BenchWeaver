# Evaluation Method

## Multiple Choice Question Answering (MCQA)

### Open Question (OQ)
The LLM fully responds to the question, selects an option, and a checker model evaluates the response.

### Probability Score (Prob)
The predicted answer is the option (A, B, C, or D) with the highest softmax score from the model's output.

## Open-Ended Question Answering (OPQA)
The LLM fully responds to the question, and a checker model evaluates the response.

## Mixed Evaluation
This method is used for multiple tasks benchmarks, including BBH and TruthfulQA. It incorporates both MCQA and OPQA evaluation methods.

## Comparison Table

| Method      | Description                                                                 | Evaluation Model |
|-------------|:----------------------------------------------------------------------------|:----------------:|
| MCQA - Open | LLM responds to the question and selects an option, evaluated by checker model | Checker Model    |
| MCQA - Prob | Uses the highest softmax score of options A, B, C, or D as the predicted answer | None             |
| OPQA        | LLM responds to the question, evaluated by checker model                    | Checker Model    |
| Mix         | Combines multiple tasks including BBH and TruthfulQA, using MCQA and OPQA   | Checker Model    |

## Output Format
There are two output formats, depending on whether a checker model is included in the evaluation method.

If a checker model is included, the output files are:
- `check_results.json`
    ```json
    {
    "abstract_algebra": [
        "True",
        "True",
        "True",
        "False",
        ]
    }
    ```
- `inference_results.json`
    ```json
    {
    "abstract_algebra": [
        "B \n\n\nHere's why:\n\n* **Understanding Field Extensions:** A field extension is created by adding elements to a field.  The degree of the extension is the dimension of the larger field as a vector space over the smaller field.\n\n* **Analyzing the Extension:**\n    *  Q(√2) has degree 2 over Q (since √2 is a root of x² - 2).\n    *  Q(√2, √3) has degree 4 over Q (√3 is not in Q(√2), so it adds another dimension).\n    *  Q(√2, √3, √18) = Q(√2, √3, √9 * √2) = Q(√2, √3, 3√2)  Since √18 is already in the extension, it doesn't increase the degree.\n\n* **Therefore, the degree of Q(√2, √3, √18) over Q is 4.**",
        "Here's how to solve this problem:\n\n**1. Understand the Notation**\n\n*  **S<sub>5</sub>:** This represents the symmetric group on 5 elements, which is the group of all permutations of 5 objects.\n* **p = (1, 2, 5, 4)(2, 3):** This is a permutation written in cycle notation. It means:\n    * 1 goes to 2, 2 goes to 5, 5 goes to 4, and 4 goes to 1.\n    * 2 goes to 3, and 3 goes to 2.\n* **<p>:** This represents the cyclic subgroup generated by p. It contains all the powers of p (p<sup>0</sup>, p<sup>1</sup>, p<sup>2</sup>, ...).\n\n**2. Calculate the Order of p**\n\nThe order of a permutation is the least common multiple of the lengths of its disjoint cycles. In this case:\n\n* Cycle 1: (1, 2, 5, 4) has length 4\n* Cycle 2: (2, 3) has length 2\n\nThe least common multiple of 4 and 2 is 4. Therefore, the order of p is 4.\n\n**3. Use Lagrange's Theorem**\n\nLagrange's Theorem states that the order of a subgroup divides the order of the group.  \n\n* The order of S<sub>5</sub> is 5! = 120.\n* The order of <p> is 4 (which we calculated).\n\nTherefore, the index of <p> in S<sub>5</sub> is:\n\nIndex = |S<sub>5</sub>| / |<p>| = 120 / 4 = 30\n\n\n\n**Answer:** The index of <p> in S<sub>5</sub> is **30**.",
        ]
    }
    ```
- `score.json`
    ```json
    {
        "Average": 78.6872,
        "STEM": 75.8781,
        "Social Sciences": 83.0354,
        "Humanities": 76.3124,
        "Other": 80.6215
    }
    ```

If a checker model is not included, the output files are:
- `results.json`
    ```json
    {
    "abstract_algebra": {
        "0": "B",
        "1": "C",
        "2": "D",
        "3": "C",
        "4": "B",
        "5": "C",
        }
    }
    ```
- `scores.json`
    ```json
    {
        "Average": 67.6257,
        "STEM": 60.8681,
        "Social Sciences": 79.623,
        "Humanities": 61.1265,
        "Other": 71.9618
    }
    ```